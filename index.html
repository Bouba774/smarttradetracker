<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>Smart Trade Tracker | Journal de Trading Professionnel</title>
    <meta name="description" content="Smart Trade Tracker - Votre journal de trading professionnel avec analyses avancées, suivi de performance et insights automatiques. Créé par un trader pour les traders.">
    <meta name="author" content="ALPHA FX" />
    <meta name="keywords" content="trading, journal, forex, crypto, indices, analyse, performance, trader">
    <meta name="theme-color" content="#0a1929">

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://challenges.cloudflare.com https://www.google.com https://www.gstatic.com https://api.mapbox.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://api.mapbox.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob: https: http:; connect-src 'self' https://sfdudueswogeusuofbbi.supabase.co https://*.supabase.co wss://*.supabase.co https://api.mapbox.com https://events.mapbox.com https://ip-api.com https://ipwho.is https://dns.google https://api.firecrawl.dev https://ai.gateway.lovable.dev https://challenges.cloudflare.com https://www.google.com; frame-src 'self' https://challenges.cloudflare.com https://www.google.com; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self'; upgrade-insecure-requests;">
    
    <!-- Additional Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="/favicon.jpg">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/app-logo.jpg">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/app-logo.jpg">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/app-logo.jpg">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://smarttradetracker.app" />
    <meta property="og:title" content="Smart Trade Tracker | Journal de Trading Professionnel">
    <meta property="og:description" content="Smart Trade Tracker - Votre journal de trading professionnel avec analyses avancées, suivi de performance et insights automatiques. Créé par un trader pour les traders.">
    <meta property="og:image" content="https://smarttradetracker.app/assets/app-logo.jpg">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:site_name" content="Smart Trade Tracker">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@SmartTradeTracker" />
    <meta name="twitter:title" content="Smart Trade Tracker | Journal de Trading Professionnel">
    <meta name="twitter:description" content="Smart Trade Tracker - Votre journal de trading professionnel avec analyses avancées, suivi de performance et insights automatiques. Créé par un trader pour les traders.">
    <meta name="twitter:image" content="https://smarttradetracker.app/assets/app-logo.jpg">
    
    <link rel="canonical" href="https://smarttradetracker.app" />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/src/main.tsx" as="script" crossorigin />
    <link rel="dns-prefetch" href="https://sfdudueswogeusuofbbi.supabase.co" />
    <link rel="preconnect" href="https://sfdudueswogeusuofbbi.supabase.co" crossorigin />
  </head>

  <body>
    <!-- Initial loading state with animated trading chart -->
    <div id="initial-loader" style="position: fixed; inset: 0; background: hsl(222 47% 8%); z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
      <!-- Animated background gradient -->
      <div class="loader-bg"></div>
      
      <!-- Animated chart lines -->
      <div class="chart-container">
        <svg class="chart-svg" viewBox="0 0 400 200" preserveAspectRatio="none">
          <!-- Grid lines -->
          <line x1="0" y1="50" x2="400" y2="50" class="grid-line"/>
          <line x1="0" y1="100" x2="400" y2="100" class="grid-line"/>
          <line x1="0" y1="150" x2="400" y2="150" class="grid-line"/>
          
          <!-- Animated trading line -->
          <path class="chart-line chart-line-1" d="M0,150 Q50,140 80,120 T150,100 T220,80 T280,90 T340,60 T400,50"/>
          <path class="chart-line chart-line-2" d="M0,160 Q60,150 100,130 T180,110 T250,95 T320,105 T380,75 T400,65"/>
          
          <!-- Candlesticks -->
          <g class="candlesticks">
            <rect class="candle green" x="40" y="110" width="8" height="30"/>
            <line class="wick green" x1="44" y1="105" x2="44" y2="145"/>
            
            <rect class="candle red" x="70" y="95" width="8" height="25"/>
            <line class="wick red" x1="74" y1="90" x2="74" y2="125"/>
            
            <rect class="candle green" x="100" y="80" width="8" height="35"/>
            <line class="wick green" x1="104" y1="72" x2="104" y2="120"/>
            
            <rect class="candle green" x="130" y="70" width="8" height="25"/>
            <line class="wick green" x1="134" y1="62" x2="134" y2="100"/>
            
            <rect class="candle red" x="160" y="75" width="8" height="30"/>
            <line class="wick red" x1="164" y1="68" x2="164" y2="110"/>
            
            <rect class="candle green" x="190" y="60" width="8" height="40"/>
            <line class="wick green" x1="194" y1="52" x2="194" y2="105"/>
            
            <rect class="candle green" x="220" y="50" width="8" height="30"/>
            <line class="wick green" x1="224" y1="42" x2="224" y2="85"/>
            
            <rect class="candle red" x="250" y="55" width="8" height="25"/>
            <line class="wick red" x1="254" y1="48" x2="254" y2="85"/>
            
            <rect class="candle green" x="280" y="45" width="8" height="35"/>
            <line class="wick green" x1="284" y1="38" x2="284" y2="85"/>
            
            <rect class="candle green" x="310" y="35" width="8" height="30"/>
            <line class="wick green" x1="314" y1="28" x2="314" y2="70"/>
            
            <rect class="candle red" x="340" y="40" width="8" height="20"/>
            <line class="wick red" x1="344" y1="35" x2="344" y2="65"/>
            
            <rect class="candle green" x="370" y="30" width="8" height="35"/>
            <line class="wick green" x1="374" y1="22" x2="374" y2="70"/>
          </g>
          
          <!-- Glow effect -->
          <defs>
            <filter id="glow">
              <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:hsl(190, 100%, 50%);stop-opacity:0"/>
              <stop offset="50%" style="stop-color:hsl(190, 100%, 50%);stop-opacity:1"/>
              <stop offset="100%" style="stop-color:hsl(160, 100%, 50%);stop-opacity:0.8"/>
            </linearGradient>
          </defs>
        </svg>
        
        <!-- Scanning line effect -->
        <div class="scan-line"></div>
      </div>
      
      <!-- Logo -->
      <div class="loader-logo">
        <img src="/assets/app-logo.jpg" alt="Smart Trade Tracker" style="width: 80px; height: 80px; border-radius: 16px; box-shadow: 0 0 40px hsl(190 100% 50% / 0.5);"/>
      </div>
      
      <!-- Pulsing dots -->
      <div class="loading-dots">
        <span></span><span></span><span></span>
      </div>
    </div>
    
    <style>
      .loader-bg {
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse at center, hsl(222 47% 12%) 0%, hsl(222 47% 8%) 70%);
      }
      .loader-bg::before {
        content: '';
        position: absolute;
        inset: 0;
        background: 
          radial-gradient(circle at 20% 30%, hsl(190 100% 50% / 0.1) 0%, transparent 40%),
          radial-gradient(circle at 80% 70%, hsl(160 100% 50% / 0.08) 0%, transparent 40%);
        animation: bgPulse 4s ease-in-out infinite;
      }
      @keyframes bgPulse {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
      }
      
      .chart-container {
        position: relative;
        width: 90%;
        max-width: 500px;
        height: 200px;
        margin-bottom: 40px;
      }
      .chart-svg {
        width: 100%;
        height: 100%;
        overflow: visible;
      }
      .grid-line {
        stroke: hsl(190 100% 50% / 0.1);
        stroke-width: 1;
      }
      .chart-line {
        fill: none;
        stroke-width: 2;
        stroke-linecap: round;
        filter: url(#glow);
      }
      .chart-line-1 {
        stroke: url(#lineGradient);
        stroke-dasharray: 800;
        stroke-dashoffset: 800;
        animation: drawLine 2s ease-out forwards, linePulse 3s ease-in-out 2s infinite;
      }
      .chart-line-2 {
        stroke: hsl(160 100% 50% / 0.3);
        stroke-dasharray: 800;
        stroke-dashoffset: 800;
        animation: drawLine 2s ease-out 0.3s forwards;
      }
      @keyframes drawLine {
        to { stroke-dashoffset: 0; }
      }
      @keyframes linePulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
      }
      
      .candlesticks {
        opacity: 0;
        animation: fadeInCandles 0.5s ease-out 1s forwards;
      }
      @keyframes fadeInCandles {
        to { opacity: 1; }
      }
      .candle {
        rx: 1;
      }
      .candle.green { fill: hsl(160 100% 40%); }
      .candle.red { fill: hsl(0 70% 50%); }
      .wick { stroke-width: 1.5; }
      .wick.green { stroke: hsl(160 100% 40%); }
      .wick.red { stroke: hsl(0 70% 50%); }
      
      .candlesticks rect, .candlesticks line {
        animation: candleFloat 2s ease-in-out infinite;
      }
      .candlesticks rect:nth-child(1), .candlesticks line:nth-child(2) { animation-delay: 0s; }
      .candlesticks rect:nth-child(3), .candlesticks line:nth-child(4) { animation-delay: 0.1s; }
      .candlesticks rect:nth-child(5), .candlesticks line:nth-child(6) { animation-delay: 0.2s; }
      .candlesticks rect:nth-child(7), .candlesticks line:nth-child(8) { animation-delay: 0.3s; }
      .candlesticks rect:nth-child(9), .candlesticks line:nth-child(10) { animation-delay: 0.4s; }
      .candlesticks rect:nth-child(11), .candlesticks line:nth-child(12) { animation-delay: 0.5s; }
      .candlesticks rect:nth-child(13), .candlesticks line:nth-child(14) { animation-delay: 0.6s; }
      .candlesticks rect:nth-child(15), .candlesticks line:nth-child(16) { animation-delay: 0.7s; }
      .candlesticks rect:nth-child(17), .candlesticks line:nth-child(18) { animation-delay: 0.8s; }
      .candlesticks rect:nth-child(19), .candlesticks line:nth-child(20) { animation-delay: 0.9s; }
      .candlesticks rect:nth-child(21), .candlesticks line:nth-child(22) { animation-delay: 1s; }
      .candlesticks rect:nth-child(23), .candlesticks line:nth-child(24) { animation-delay: 1.1s; }
      @keyframes candleFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-3px); }
      }
      
      .scan-line {
        position: absolute;
        top: 0;
        left: 0;
        width: 3px;
        height: 100%;
        background: linear-gradient(to bottom, transparent, hsl(190 100% 50% / 0.8), transparent);
        animation: scan 2s linear infinite;
        filter: blur(1px);
      }
      @keyframes scan {
        0% { left: 0; opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { left: 100%; opacity: 0; }
      }
      
      .loader-logo {
        position: relative;
        z-index: 1;
        animation: logoFloat 3s ease-in-out infinite;
      }
      @keyframes logoFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
      
      .loading-dots {
        display: flex;
        gap: 8px;
        margin-top: 24px;
      }
      .loading-dots span {
        width: 10px;
        height: 10px;
        background: hsl(190 100% 50%);
        border-radius: 50%;
        animation: dotPulse 1.4s ease-in-out infinite;
      }
      .loading-dots span:nth-child(1) { animation-delay: 0s; }
      .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
      .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
      @keyframes dotPulse {
        0%, 100% { transform: scale(1); opacity: 0.5; }
        50% { transform: scale(1.3); opacity: 1; }
      }
    </style>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Global function to hide loader - can be called multiple times safely
      window.hideInitialLoader = function() {
        var loader = document.getElementById('initial-loader');
        if (loader && loader.style.display !== 'none') {
          loader.style.opacity = '0';
          loader.style.transition = 'opacity 0.3s ease-out';
          setTimeout(function() { loader.style.display = 'none'; }, 300);
        }
      };
      // Listen for app-ready event
      window.addEventListener('app-ready', window.hideInitialLoader);
      // Fallback: hide after 5 seconds max
      setTimeout(window.hideInitialLoader, 5000);
    </script>
  </body>
</html>
